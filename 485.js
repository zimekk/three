"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[485],{8485:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var n=r(2784),a=r(2955),o=r(3747),c=r(248),s=r(6727),i=r(7539),l=r(9557);function u(e){const[t,r]=(0,n.useState)(!1);function a({key:t}){t===e&&r(!0)}const o=({key:t})=>{t===e&&r(!1)};return(0,n.useEffect)((()=>(window.addEventListener("keydown",a),window.addEventListener("keyup",o),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",o)})),[]),t}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}const p=r(9117).Z;function f(e){const t=(0,n.useRef)(),{nodes:r,materials:a}=(0,s.L)(p);return n.createElement("group",m({ref:t},e,{dispose:null}),n.createElement("mesh",{geometry:r.Cube.geometry,material:a.Material,position:[-.01,0,0],scale:[4.24,.32,3.88]}),n.createElement("mesh",{geometry:r["Grass_Seamless_Texture_#1417"].geometry,material:a["Grass Seamless Texture #1417"],position:[-.51,.73,0]}))}s.L.preload(p);var w=r(8790);function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}const h=({position:{x:e,y:t,z:r}},n=1)=>[e,t+n,r];function y(e){const[t]=(0,c.xK)((()=>({rotation:[-Math.PI/2,0,0],...e})));return n.createElement("mesh",{ref:t,receiveShadow:!0},n.createElement("planeBufferGeometry",{attach:"geometry",args:[15,15]}),n.createElement("shadowMaterial",{attach:"material",color:"#171717"}))}const E=new a.Vector3,d=new a.Vector3,v=new a.Vector3,b=new a.Vector3,A=new a.Vector3;function x({parameter:e,...t}){const[r,a]=(0,n.useState)(0),i=(0,n.useRef)(),[m,p]=(0,c.Eo)((()=>({args:1,mass:1,position:[0,3,0],isKinematic:!0}))),f=({position:{x:e,y:t,z:n}},a=3,o=3)=>[e+Math.sin(r)*a,t+o,n+Math.cos(r)*a];Object.assign(window,{ref:m,api:p});const{gl:w,camera:y}=(0,o.Ky)(),{scene:x}=(0,s.L)("boy.gltf"),[{pos:k,cam:L},S]=(0,l.q_)((()=>({pos:[0,0,0],cam:[0,0,0],config:l.vc.slow}))),z={ArrowUp:u("ArrowUp"),ArrowDown:u("ArrowDown"),ArrowLeft:u("ArrowLeft"),ArrowRight:u("ArrowRight"),Space:u(" ")};(0,n.useEffect)((()=>{S.start({pos:h(m.current),cam:f(m.current)})}),[]),(0,n.useEffect)((()=>{z.ArrowLeft&&(i.current.rotation.y+=1*Math.PI/4)}),[z.ArrowLeft]),(0,n.useEffect)((()=>{z.ArrowRight&&(i.current.rotation.y+=-1*Math.PI/4)}),[z.ArrowRight]),Object.assign(window,{vector:A,camera:y,cam:L}),(0,o.xQ)((({clock:e})=>{e.getElapsedTime(),m.current.getWorldPosition(A),y.lookAt(A),y.position.set(...L.get())}));const M=(0,n.useRef)([0,0,0]);return(0,n.useEffect)((()=>p.velocity.subscribe((e=>M.current=e))),[]),(0,o.xQ)((e=>{const t=z.Space;m.current.getWorldPosition(i.current.position),d.set(0,0,Number(z.ArrowDown)-Number(z.ArrowUp)),E.subVectors(d,v).normalize().multiplyScalar(5).applyEuler(i.current.rotation),b.fromArray(M.current),p.velocity.set(E.x,M.current[1],E.z),t&&Math.abs(M.current[1].toFixed(2))<.05&&p.velocity.set(M.current[0],10,M.current[2]),m.current.getWorldPosition(A),S.start({pos:h({position:A}),cam:f({position:A})})})),n.createElement("group",null,n.createElement("mesh",{ref:m}),n.createElement("primitive",g({ref:i,object:x},t)))}function k(){const[e,t]=(0,n.useState)({x:4,y:0,z:-3});return n.createElement("section",{className:w.Z.Demo},n.createElement("div",{className:w.Z.Range},n.createElement("input",{type:"range",min:"-10",max:"10",value:e.x,onChange:e=>t((t=>({...t,x:e.target.value})))})," ",n.createElement("input",{type:"range",min:"-10",max:"10",value:e.y,onChange:e=>t((t=>({...t,y:e.target.value})))})," ",n.createElement("input",{type:"range",min:"-10",max:"10",value:e.z,onChange:e=>t((t=>({...t,z:e.target.value})))})," ",JSON.stringify(e)),n.createElement(o.Xz,{shadowMap:!0,gl:{alpha:!1},camera:{position:[-1,2,5],fov:50}},n.createElement(n.Suspense,{fallback:"loading..."},n.createElement(f,{scale:1}),n.createElement(c.wI,null,n.createElement(c.cG,null,n.createElement(y,null),n.createElement(x,{position:[0,1,0],scale:[.1,.1,.1]})))),n.createElement(i.z,null),n.createElement("color",{attach:"background",args:["lightblue"]}),n.createElement("hemisphereLight",{intensity:.35}),n.createElement("spotLight",{position:[10,10,10],angle:.3,penumbra:1,intensity:2,castShadow:!0})))}},9117:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"b8fdafb76c28e03b126e8898a130387f.gltf"}}]);